name       : minizip-ng
version    : 4.0.6
release    : 7
source     :
    - https://github.com/zlib-ng/minizip-ng/archive/refs/tags/4.0.6.tar.gz : e96ed3866706a67dbed05bf035e26ef6b60f408e1381bf0fe9af17fe2c0abebc
license    : Zlib
homepage   : https://github.com/zlib-ng/minizip-ng
component  : system.utils
summary    : Fork of the zlib zip library
description: |
    Fork of the popular zip manipulation library found in the zlib distribution
clang      : yes
optimize   :
    - speed
builddeps  :
    - pkgconfig(bzip2)
    - pkgconfig(libcrypto)
    - pkgconfig(liblzma)
    - pkgconfig(libzstd)
replaces   :
    - zlib-minizip
    - devel : zlib-minizip-devel
setup      : |
    %cmake_ninja -B compat \
                 -DBUILD_SHARED_LIBS=ON \
                 -DMZ_LIBBSD=OFF \
                 -DMZ_COMPAT=ON

    %cmake_ninja -B regular \
                 -DBUILD_SHARED_LIBS=ON \
                 -DMZ_LIBBSD=OFF \
                 -DMZ_COMPAT=OFF
build      : |
    %ninja_build -C compat
    %ninja_build -C regular
install    : |
    %ninja_install -C compat
    %ninja_install -C regular
# TODO Split the compat library out to a different package.
