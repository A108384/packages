name       : kimageannotator
version    : 0.7.0
release    : 6
source     :
    - https://github.com/ksnip/kImageAnnotator/archive/refs/tags/v0.7.0.tar.gz : 66e6ff5de1f8f808834143130a0a06d203aa01fb8f02e65af73042e61342163a
license    : LGPL-3.0-only
component  : desktop.qt
homepage   : https://github.com/ksnip/kImageAnnotator
summary    : Tool for annotating images
description: |
    Tool for annotating images
builddeps  :
    - pkgconfig(Qt5Designer)
    - pkgconfig(Qt5Svg)
    - pkgconfig(x11)
    - kcolorpicker-devel
clang      : yes
optimize   : thin-lto
setup      : |
    %cmake_ninja -DBUILD_SHARED_LIBS=ON
build      : |
    %ninja_build
install    : |
    %ninja_install

    # Needed for Gwenview 23.08. Remove after switching to Qt6 build
    mkdir -p $installdir/usr/lib64/cmake/kImageAnnotator
    ln -sr $installdir/usr/lib64/cmake/kImageAnnotator-Qt5/kImageAnnotator-Qt5Config.cmake $installdir/usr/lib64/cmake/kImageAnnotator/kImageAnnotatorConfig.cmake
    ln -sr $installdir/usr/lib64/cmake/kImageAnnotator-Qt5/kImageAnnotator-Qt5Config-version.cmake $installdir/usr/lib64/cmake/kImageAnnotator/kImageAnnotatorConfig-version.cmake
    ln -sr $installdir/usr/lib64/cmake/kImageAnnotator-Qt5/kImageAnnotator-targets* $installdir/usr/lib64/cmake/kImageAnnotator/
