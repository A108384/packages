name       : kcolorpicker
version    : 0.3.0
release    : 5
source     :
    - https://github.com/ksnip/kColorPicker/archive/refs/tags/v0.3.0.tar.gz : cab1efae1ca345a831dc6975b81c344da5c9425d934d73584dd7d0d512af3946
license    : LGPL-3.0-only
component  : desktop.qt
homepage   : https://github.com/ksnip/kColorPicker
summary    : Qt based Color Picker with popup menu
description: |
    Qt based Color Picker with popup menu
builddeps  :
    - pkgconfig(Qt5Core)
clang      : yes
optimize   : thin-lto
setup      : |
    %cmake_ninja -DBUILD_SHARED_LIBS=ON
build      : |
    %ninja_build
install    : |
    %ninja_install

    # Needed for Gwenview 23.08. Remove after switching to Qt6 build
    mkdir -p $installdir/usr/lib64/cmake/kColorPicker
    ln -sr $installdir/usr/lib64/cmake/kColorPicker-Qt5/kColorPicker-Qt5Config.cmake $installdir/usr/lib64/cmake/kColorPicker/kColorPickerConfig.cmake
    ln -sr $installdir/usr/lib64/cmake/kColorPicker-Qt5/kColorPicker-Qt5Config-version.cmake $installdir/usr/lib64/cmake/kColorPicker/kColorPickerConfig-version.cmake
    ln -sr $installdir/usr/lib64/cmake/kColorPicker-Qt5/kColorPicker-Qt5-targets* $installdir/usr/lib64/cmake/kColorPicker/
