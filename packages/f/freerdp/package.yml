name       : freerdp
version    : 3.4.0
release    : 36
source     :
    - https://github.com/FreeRDP/FreeRDP/releases/download/3.4.0/freerdp-3.4.0.tar.gz : e44fec047d69c728178a21cdc3d5a55d1dac57e4c104e7318d27cba247232133
homepage   : https://www.freerdp.com/
license    : Apache-2.0
component  : network.util
summary    : FreeRDP is a free remote desktop protocol client
description: |
    FreeRDP is a free implementation of the Remote Desktop Protocol (RDP).
builddeps  :
    - pkgconfig(SDL2_ttf)
    - pkgconfig(alsa)
    - pkgconfig(cairo)
    - pkgconfig(fuse3)
    - pkgconfig(libavcodec)
    - pkgconfig(libcjson)
    - pkgconfig(libpcsclite)
    - pkgconfig(libpkcs11-helper-1)
    - pkgconfig(libpulse)
    - pkgconfig(libusbredirhost)
    - pkgconfig(mit-krb5)
    - pkgconfig(sdl2)
    - pkgconfig(wayland-client)
    - pkgconfig(webkit2gtk-4.0)
    - pkgconfig(xcursor)
    - pkgconfig(xdamage)
    - pkgconfig(xext)
    - pkgconfig(xfixes)
    - pkgconfig(xi)
    - pkgconfig(xinerama)
    - pkgconfig(xkbcommon)
    - pkgconfig(xkbfile)
    - pkgconfig(xrandr)
    - pkgconfig(xrender)
    - pkgconfig(xshmfence)
    - pkgconfig(xtst)
    - pkgconfig(xv)
    - cups-devel
    - docbook-xml
    - libxslt
    - scons
clang      : yes
optimize   : thin-lto
setup      : |
    %patch -p1 -i $pkgfiles/0001-Revert-cmake-Fix-man-page-generation.patch
    %cmake_ninja \
        -DWITH_BINARY_VERSIONING=ON \
        -DWITH_MANPAGES=ON \
        -DWITH_SSE2=ON \
        -DWITH_SERVER=ON \
        -DWITH_SWSCALE=ON \
        -DUWAC_FORCE_STATIC_BUILD=ON # fixme! fix conflicts with freerdp2
build      : |
    %ninja_build
install    : |
    %ninja_install
# patterns   :
#     - devel : /usr/lib64/cmake
