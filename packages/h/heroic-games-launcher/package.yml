name       : heroic-games-launcher
version    : 2.12.0
release    : 24
source     :
    - git|https://github.com/Heroic-Games-Launcher/HeroicGamesLauncher.git : v2.12.0
homepage   : https://heroicgameslauncher.com/
license    : GPL-3.0-or-later
component  : games
networking : yes
summary    : An Open Source game launcher with built-in support for Epic and GOG.
description: |
    Heroic is an Open Source Game Launcher for Linux, Windows and MacOS (for both Native and Windows Games using Crossover). Right now it supports launching games from the Epic Games Store using Legendary and GOG Games using our custom implementation with gogdl. Heroic is built with Web Technologies like: TypeScript, React, NodeJS and Electron.
builddeps  :
    - pkgconfig(alsa)
    - pkgconfig(gbm)
    - pkgconfig(gtk+-3.0)
    - pkgconfig(xshmfence)
    - cups-devel
    - yarn
setup      : |
    yarn install --frozen-lockfile
build      : |
    yarn dist:linux tar.xz
install    : |
    export heroicdir=/usr/share/heroic
    install -dm00755 $installdir/$heroicdir
    install -dm00755 $installdir/usr/bin

    # Copy dist files and link binaries
    cp -R ./dist/linux-unpacked/* $installdir/$heroicdir/
    ln -s $heroicdir/heroic $installdir/usr/bin/heroic-run
    ln -s $heroicdir/resources/app.asar.unpacked/build/bin/linux/legendary $installdir/usr/bin/legendary
    ln -s $heroicdir/resources/app.asar.unpacked/build/bin/linux/gogdl $installdir/usr/bin/gogdl

    # Copy icon
    install -Dm00644 ./dist/linux-unpacked/resources/app.asar.unpacked/build/icon.png $installdir/usr/share/icons/hicolor/512x512/apps/com.heroicgameslauncher.hgl.png

    # Set up .desktop file
    sed -i 's/StartupWMClass.*/StartupWMClass=heroic/' ./flatpak/com.heroicgameslauncher.hgl.desktop
    install -Dm00644 ./flatpak/com.heroicgameslauncher.hgl.desktop -t $installdir/usr/share/applications

    # Install appstream metadata
    install -Dm00644 ./flatpak/templates/com.heroicgameslauncher.hgl.metainfo.xml.template $installdir/usr/share/metainfo/com.heroicgameslauncher.hgl.metainfo.xml
