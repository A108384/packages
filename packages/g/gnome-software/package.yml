name       : gnome-software
version    : '46.0'
release    : 6
source     :
    - https://download.gnome.org/sources/gnome-software/46/gnome-software-46.0.tar.xz : 11893002bbb54082896683707bc3991ae55a2f3040811a760e3a92c96544f86e
homepage   : https://apps.gnome.org/Software/
license    : GPL-2.0-or-later
component  : desktop.gnome
summary    : UNSUPPORTED & EXPERIMENTAL (reserved for Solus Staff testing)
description: |
    WARNING: This package is **unsupported** and **experimental.**

    It is included at this early stage to make it easier for Solus Staff to test and debug it.

    Experienced contributors with packaging and bugreporting experience are welcome to help us test and report (non-duplicate!) problems here:

    See getsolus/packages#717 and getsolus/packages#718
builddeps  :
    - pkgconfig(appstream)
    - pkgconfig(flatpak)
    - pkgconfig(fwupd)
    - pkgconfig(gsettings-desktop-schemas)
    - pkgconfig(gtk4)
    - pkgconfig(json-glib-1.0)
    - pkgconfig(libadwaita-1)
    - pkgconfig(libsoup-3.0)
    - pkgconfig(packagekit-glib2)
    - pkgconfig(xmlb)
    - gtk-doc
setup      : |
    # reenable me!
    #patch -p1 -i $pkgfiles/0001-gs-appstream-Check-against-kernel-relation-types.patch
    %patch -p1 -i $pkgfiles/0001-packagekit-Hardcode-some-solus-thingies.patch
    %meson_configure \
        -Dpackagekit_autoremove=true \
        -Dmalcontent=false \
        -Dtests=false
build      : |
    %ninja_build
install    : |
    %ninja_install

    install -Dm00644 $pkgfiles/org.gnome.software.gschema.override $installdir/usr/share/glib-2.0/schemas/org.gnome.software.gschema.override

    # TODO: Remove once this is ready for user testing
    # - the goal is to ensure that Solus SC picks up the scary summary + description text
    rm -fr $installdir/usr/share/metainfo/
