name       : gstreamer-1.0
version    : 1.24.0
release    : 47
source     :
    - https://gstreamer.freedesktop.org/src/gstreamer/gstreamer-1.24.0.tar.xz : 81c38617798d331269e389d56fb1388073e1dc9d489fe9bf2113f86b48b59138
license    : LGPL-2.0-or-later
component  : multimedia.gstreamer
homepage   : https://gstreamer.freedesktop.org/
summary    : Streaming media framework
description: |
    GStreamer is a streaming media framework that enables applications to share a common set of plugins for things like video encoding and decoding, audio encoding and decoding, audio and video filters, audio visualisation, web streaming and anything else that streams in real-time or otherwise. This package only provides base functionality and libraries. You may need at least gst-plugins-base and one of Good, Bad, Ugly or Libav plugins.
emul32     : yes
builddeps  :
    - pkgconfig32(glib-2.0)
    - pkgconfig32(libcap)
    - pkgconfig32(libdw)
    - pkgconfig32(libunwind)
    - pkgconfig(gobject-introspection-1.0)
    - cargo
patterns   :
    - 32bit :
        - /usr/share/gdb/auto-load/usr/lib32/
setup      : |
    if [[ -n "${EMUL32BUILD}" ]]; then
        CONFIGURE_OPTIONS="-Dintrospection=disabled -Dtests=disabled"
    fi

    %meson_configure -Dpackage-origin="https://getsol.us" \
        -Dexamples=disabled \
        -Dptp-helper-permissions=capabilities \
        -Dwrap_mode=nodownload \
        $CONFIGURE_OPTIONS
build      : |
    %ninja_build
install    : |
    %ninja_install

    if [[ -z "${EMUL32BUILD}" ]]; then
        rm -v $installdir/usr/bin/gst-tester-1.0 \
              $installdir/usr/lib64/gstreamer-1.0/gstreamer-1.0/gst-ptp-helper-test
    fi
check      : |
    %ninja_check
