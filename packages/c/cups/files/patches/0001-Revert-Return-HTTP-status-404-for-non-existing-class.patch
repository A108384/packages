From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Reilly Brogan <reilly@reillybrogan.com>
Date: Sun, 5 May 2024 20:56:46 -0500
Subject: [PATCH] Revert "Return HTTP status 404 for non-existing classes and
 printers (Issue #423)"

This reverts commit 9a9f9b380f68c39f2e6039ac7ee543e328b2fdab.
---
 scheduler/client.c | 24 +-----------------------
 1 file changed, 1 insertion(+), 23 deletions(-)

diff --git a/scheduler/client.c b/scheduler/client.c
index 2dafd931..2498b5fb 100644
--- a/scheduler/client.c
+++ b/scheduler/client.c
@@ -1138,19 +1138,8 @@ cupsdReadClient(cupsd_client_t *con)	/* I - Client to read from */
 	      }
 	      else if (!strncmp(con->uri, "/classes", 8))
 	      {
-	        if (strlen(con->uri) > 9 && !cupsdFindClass(con->uri + 9))
-	        {
-		  if (!cupsdSendError(con, HTTP_STATUS_NOT_FOUND, CUPSD_AUTH_NONE))
-		  {
-		    cupsdCloseClient(con);
-		    return;
-		  }
-
-		  break;
-	        }
-
 		cupsdSetStringf(&con->command, "%s/cgi-bin/classes.cgi", ServerBin);
-		if (con->uri[8] && con->uri[9])
+                if (con->uri[8] && con->uri[9])
 		  cupsdSetString(&con->options, con->uri + 8);
 		else
 		  cupsdSetString(&con->options, NULL);
@@ -1165,17 +1154,6 @@ cupsdReadClient(cupsd_client_t *con)	/* I - Client to read from */
 	      }
               else if (!strncmp(con->uri, "/printers", 9))
 	      {
-	        if (strlen(con->uri) > 10 && !cupsdFindPrinter(con->uri + 10))
-	        {
-		  if (!cupsdSendError(con, HTTP_STATUS_NOT_FOUND, CUPSD_AUTH_NONE))
-		  {
-		    cupsdCloseClient(con);
-		    return;
-		  }
-
-		  break;
-	        }
-
 		cupsdSetStringf(&con->command, "%s/cgi-bin/printers.cgi", ServerBin);
                 if (con->uri[9] && con->uri[10])
 		  cupsdSetString(&con->options, con->uri + 9);
